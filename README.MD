FastAPI ToDo API with Authentication

A ToDo REST API built with FastAPI, PostgreSQL, and SQLAlchemy ORM, including JWT-based Authentication and Alembic for migrations.

ğŸš€ Features

âœ… User Registration & Login (JWT Authentication)
âœ… Create, Read, Update, Delete ToDos
âœ… Access control â€” Each user can only manage their own ToDos
âœ… PostgreSQL database
âœ… Alembic for version-controlled migrations
âœ… Fully tested with Swagger UI and cURL

ğŸ§  Tech Stack

FastAPI â€“ Backend Framework

SQLAlchemy â€“ ORM for database management

Alembic â€“ Database migrations

PostgreSQL â€“ Database

Pydantic â€“ Data validation

Uvicorn â€“ ASGI server

ğŸ—ï¸ Project Setup
1ï¸âƒ£ Clone the Repository
git clone https://github.com/yourusername/fastapi-todo-app.git
cd fastapi-todo-app

2ï¸âƒ£ Create and Activate Virtual Environment
python -m venv venv
venv\Scripts\activate      # On Windows
source venv/bin/activate   # On macOS/Linux

3ï¸âƒ£ Install Dependencies
pip install -r requirements.txt

4ï¸âƒ£ Create .env File

Inside your project root, create a .env file with:

DATABASE_URL=Your_Database_url
SECRET_KEY=your_secret_key_here
ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=60

ğŸ§© Database Setup (Alembic)
Step 1: Initialize Alembic
alembic init alembic

Step 2: Edit alembic.ini

Find this line:

sqlalchemy.url = driver://user:pass@localhost/dbname


Replace it with your environment variable:

sqlalchemy.url = postgresql://username:password@localhost:5432/YourDB


Or better, load it dynamically in alembic/env.py:

from dotenv import load_dotenv
import os
from sqlalchemy import engine_from_config, pool
from alembic import context

load_dotenv()
DATABASE_URL = os.getenv("DATABASE_URL")
config.set_main_option("sqlalchemy.url", DATABASE_URL)

Step 3: Generate and Apply Migrations
alembic revision --autogenerate -m "Initial migration"
alembic upgrade head


âœ… This creates tables: users, todos, refresh_tokens, and alembic_version.

â–¶ï¸ Run the Application
uvicorn app.main:app --reload


Swagger UI will be available at:
ğŸ‘‰ http://127.0.0.1:8000/docs

ğŸ”‘ Authentication Flow
Register User

POST /auth/register

{
  "username": "harshit",
  "email": "harshit@example.com",
  "password": "password123"
}

Login User

POST /auth/login (Form data)

Get access_token and refresh_token

Use your token in Swagger:

Authorization: Bearer <access_token>

ğŸ§¾ ToDo API Endpoints
Method	Endpoint	Description
POST	/todos/	Create new ToDo
GET	/todos/	List user ToDos
GET	/todos/{id}	Get ToDo by ID
PUT	/todos/{id}	Update ToDo
DELETE	/todos/{id}	Delete ToDo
ğŸ—ƒï¸ Database Example (PostgreSQL)
SELECT * FROM users;
SELECT * FROM todos;


Example result:

id	title	description	completed	user_id
1	Todo Application	this is todo api application	False	2
ğŸ“‚ Folder Structure
app/
â”‚
â”œâ”€â”€ routers/
â”‚   â”œâ”€â”€ auth_router.py
â”‚   â””â”€â”€ todo_router.py
â”‚
â”œâ”€â”€ models.py
â”œâ”€â”€ schemas.py
â”œâ”€â”€ crud.py
â”œâ”€â”€ database.py
â”œâ”€â”€ deps.py
â”œâ”€â”€ auth.py
â””â”€â”€ main.py

ğŸ Future Enhancements
Add frontend (React or Next.js)

Add user roles (Admin, Regular User)

Implement task priority & deadlines

Deploy on Render / Railway / AWS
